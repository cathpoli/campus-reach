import{r as w,u as v,j as t,a as x}from"./app-BpMrd8A8.js";import{A as C}from"./AppLayout-C6t-PRuo.js";import{P as _}from"./PageMeta-WwP9N5ca.js";import{S as n}from"./sweetalert2.esm.all-B3GDCxSY.js";import"./calender-line-CgieKiv7.js";function z({teacher:s,schedules:g=[]}){var m,u,b,p;const[o,y]=w.useState(null),{data:N,setData:h,post:f,processing:d,errors:S}=v({schedule_id:"",teacher_id:s.id,title:"",notes:""}),l=g.reduce((e,a)=>{const r=a.date;return e[r]||(e[r]=[]),e[r].push(a),e},{}),c=e=>{const a=new Date(e),r={weekday:"long",year:"numeric",month:"long",day:"numeric"};return a.toLocaleDateString("en-US",r)},i=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),k=e=>{y(e),h("schedule_id",e.schedule_id)},j=e=>{if(e.preventDefault(),!o){n.fire({title:"Error!",text:"Please select a time slot",icon:"error",confirmButtonColor:"#1b2d5a",customClass:{container:"swal-z-index"}});return}n.fire({title:"Book this appointment?",text:`${c(o.date)} at ${i(o.start_date_time)} - ${i(o.end_date_time)}`,icon:"question",showCancelButton:!0,confirmButtonColor:"#1b2d5a",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, book it!",cancelButtonText:"Cancel",customClass:{container:"swal-z-index"}}).then(a=>{a.isConfirmed&&f("/appointment/store",{onSuccess:()=>{n.fire({title:"Success!",text:"Appointment booked successfully",icon:"success",confirmButtonColor:"#1b2d5a",customClass:{container:"swal-z-index"}}).then(()=>{x.visit("/dashboard")})},onError:()=>{n.fire({title:"Error!",text:"Failed to book appointment. Please try again.",icon:"error",confirmButtonColor:"#1b2d5a",customClass:{container:"swal-z-index"}})}})})};return t.jsxs(C,{children:[t.jsx(_,{title:"Book Appointment",description:"Book an appointment with your teacher"}),t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:["Make an appointment to ",((m=s.profile)==null?void 0:m.first_name)||((u=s.profile)==null?void 0:u.firstname)||"Mr./Ms."," ",((b=s.profile)==null?void 0:b.last_name)||((p=s.profile)==null?void 0:p.lastname)||"Teacher"]})}),t.jsx("div",{className:"p-6",children:Object.keys(l).length>0?t.jsx("div",{className:"space-y-6",children:Object.entries(l).map(([e,a])=>t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"text-base font-medium text-gray-700 dark:text-gray-300",children:["Available time for ",c(e)]}),t.jsx("div",{className:"flex flex-wrap gap-3",children:a.map(r=>t.jsxs("button",{type:"button",onClick:()=>k(r),disabled:r.status!=="available",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all border-2 ${(o==null?void 0:o.schedule_id)===r.schedule_id?"bg-[#1b2d5a] text-white border-[#1b2d5a]":r.status==="available"?"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-[#1b2d5a]":"bg-gray-100 dark:bg-gray-900 text-gray-400 dark:text-gray-600 border-gray-200 dark:border-gray-800 cursor-not-allowed"}`,children:[i(r.start_date_time)," to ",i(r.end_date_time)]},r.schedule_id))})]},e))}):t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No available schedules at the moment."})})}),t.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>x.visit("/dashboard"),className:"px-6 py-2.5 rounded-lg bg-gray-700 text-white font-medium hover:bg-gray-600 transition-colors",children:"Close"}),t.jsx("button",{type:"button",onClick:j,disabled:!o||d,className:"px-6 py-2.5 rounded-lg text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",style:{backgroundColor:"#1b2d5a"},children:d?"Submitting...":"Submit"})]})]})})]})}export{z as default};
