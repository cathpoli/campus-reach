import{r as x,a as b,j as e}from"./app-BL5UC4wd.js";import{P as B}from"./PageMeta-B7nxyKo0.js";import{A as S}from"./AppLayout-CxwfE4ym.js";import{S as l}from"./sweetalert2.esm.all-B3GDCxSY.js";import"./calender-line-B5yTJBKH.js";function W({hasSchedule:h=!1,schedules:$=[],events:f=[]}){const[r,g]=x.useState(new Date),y=t=>{l.fire({title:"Cancel Appointment?",text:"Are you sure you want to cancel this appointment? The student will be notified.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, cancel it",cancelButtonText:"No, keep it",customClass:{container:"swal-z-index"}}).then(n=>{n.isConfirmed&&b.post(`/appointment/${t}/cancel`,{},{onSuccess:()=>{l.fire({title:"Cancelled!",text:"The appointment has been cancelled successfully.",icon:"success",confirmButtonColor:"#00bcd4",timer:2e3,customClass:{container:"swal-z-index"}})},onError:()=>{l.fire({title:"Error!",text:"Failed to cancel the appointment. Please try again.",icon:"error",confirmButtonColor:"#ef4444",customClass:{container:"swal-z-index"}})}})})},k=t=>{const n=t.start.split("T")[0],o=new Date().toISOString().split("T")[0],u=n>o,m=t.start.replace(" ","T"),i=new Date(m),s=t.end.includes("T")?t.end.split("T")[1]:t.end.split(" ")[1],N=t.start.includes("T")?t.start.split("T")[1]:t.start.split(" ")[1],T={weekday:"long",year:"numeric",month:"long",day:"numeric"};i.toLocaleDateString("en-US",T);const d={title:"Heads up!",html:`
				<div class="text-center">
					<p class="mb-4">${t.student_name} booked an appointment on ${N} to ${s}</p>
					${t.zoom_link?`
						<div class="mb-4 text-left">
							<p class="font-medium mb-2">Zoom Link :</p>
							<a href="${t.zoom_link}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline break-all">${t.zoom_link}</a>
						</div>
					`:""}
					<div class="bg-cyan-50 border border-cyan-200 rounded-lg p-4 text-left">
						<p class="font-semibold text-cyan-900 mb-2">REMINDER :</p>
						<ul class="text-sm text-cyan-800 space-y-1">
							<li>• You can cancel your appointment ahead of time.</li>
							<li>• If the student is idle or unattended after 10 minutes you may leave the meeting.</li>
						</ul>
					</div>
				</div>
			`,icon:"info",showConfirmButton:!1,customClass:{container:"swal-z-index"}};u&&(d.showDenyButton=!0,d.denyButtonColor="#ef4444",d.denyButtonText="Cancel Appointment"),l.fire(d).then(M=>{M.isDenied&&y(t.id)})},w=t=>{if(!t)return[];const n=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(t).padStart(2,"0")}`;return f.filter(a=>a.start.startsWith(n))};x.useEffect(()=>{h||l.fire({title:"Reminder!",html:"You don't have any schedule for this week.<br>Please set up your schedule.",icon:"info",showCancelButton:!0,confirmButtonColor:"#00bcd4",cancelButtonColor:"#6b7280",confirmButtonText:"Setup Schedule",cancelButtonText:"Later",customClass:{container:"swal-z-index"}}).then(t=>{t.isConfirmed&&b.visit("/appointments")})},[h]);const c=t=>{const n=new Date(r);n.setMonth(n.getMonth()+t),g(n)},j=()=>{g(new Date)},C=(()=>{const t=r.getFullYear(),n=r.getMonth(),a=new Date(t,n,1),u=new Date(t,n+1,0).getDate(),m=a.getDay(),i=[];for(let s=0;s<m;s++)i.push(null);for(let s=1;s<=u;s++)i.push(s);return i})(),D=["January","February","March","April","May","June","July","August","September","October","November","December"],v=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p=t=>{if(!t)return!1;const n=new Date;return t===n.getDate()&&r.getMonth()===n.getMonth()&&r.getFullYear()===n.getFullYear()};return e.jsxs(S,{children:[e.jsx(B,{title:"Teacher Dashboard - Campus Reach",description:"Campus Reach Teacher Dashboard"}),e.jsx("div",{className:"grid grid-cols-12 gap-4 md:gap-6",children:e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your schedule and appointments"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(-10),className:"p-2 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors",title:"Fast backward",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),e.jsx("button",{onClick:()=>c(-1),className:"p-2 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors",title:"Previous",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-500 transition-colors text-sm font-medium",children:"today"}),e.jsx("button",{onClick:()=>c(1),className:"p-2 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors",title:"Next",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("button",{onClick:()=>c(10),className:"p-2 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors",title:"Fast forward",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 text-center",children:[D[r.getMonth()]," ",r.getFullYear()]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[v.map(t=>e.jsx("div",{className:"text-center font-semibold text-gray-700 dark:text-gray-300 py-2 border-b-2 border-gray-300 dark:border-gray-600",children:t},t)),C.map((t,n)=>{const a=w(t);return e.jsx("div",{className:`min-h-[100px] p-2 border border-gray-200 dark:border-gray-700 ${t?"bg-gray-50 dark:bg-gray-900":"bg-gray-100 dark:bg-gray-800"} ${p(t)?"ring-2 ring-blue-500":""}`,children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${p(t)?"bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center":"text-gray-900 dark:text-white"}`,children:t}),a.map(o=>e.jsx("div",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 p-1 rounded mb-1 truncate cursor-pointer hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors",title:`${o.title} - ${o.student_name}`,onClick:()=>k(o),children:o.title},o.id))]})},n)})]})]})]})]})})]})}export{W as default};
